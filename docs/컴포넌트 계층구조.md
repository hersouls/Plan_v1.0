# Moonwave Plan 컴포넌트 계층구조 (Component Hierarchy)

## 개요

이 문서는 현재 코드베이스의 실제 파일 구조를 100% 반영하여 Plan_v2.0에도 동일하게 복제할 수 있도록 설계된 컴포넌트 계층구조 문서입니다. 모든 컴포넌트는 `docs/디자인가이드.md`의 스타일 가이드라인을 준수합니다.

## 1. 컨테이너 (Container) 계층

### 1.1 Layout Container

```
📁 Layout (src/components/layout/)
├── Header.tsx                 - 글로벌 헤더
├── Footer.tsx                 - 글로벌 푸터
├── ConditionalHeader.tsx      - 페이지/상태별 조건부 헤더
└── WaveBackground.tsx         - 배경 웨이브/스타일 효과
```

### 1.2 Page Containers (src/pages)

```
📁 Pages (src/pages/)
├── TodoHome.tsx               - 홈 대시보드
├── TaskCreate.tsx             - 할일 생성
├── TaskDetailPage.tsx         - 할일 상세 페이지(페이지 레벨)
├── FamilyManage.tsx           - 가족 관리
├── Settings.tsx               - 설정(페이지)
├── SettingsPage.tsx           - 설정(레거시/대체 페이지)
├── Statistics.tsx             - 통계 기본
├── StatisticsEnhanced.tsx     - 통계 확장
├── Notifications.tsx          - 알림 센터
├── PointsManagement.tsx       - 포인트 관리
├── Login.tsx                  - 로그인
├── index.ts                   - 페이지 배럴
└── PointsManagement.tsx.backup - (백업 파일, 프로덕션 미사용)
```

### 1.3 Settings Container

```
📁 Settings (src/components/settings/)
├── SettingsContainer.tsx      - 설정 메인 컨테이너(페이지/모달 모드 호환)
├── types.ts                   - 설정 도메인 타입 정의
├── index.ts                   - 설정 배럴
├── hooks/
│   └── useSettings.ts         - 설정 상태 관리 훅(중앙화)
└── components/
    ├── SettingsContent.tsx    - 우측 콘텐츠 래퍼
    ├── SettingsGroup.tsx      - 섹션 그룹/제목 래퍼
    ├── SettingsNavigation.tsx - 좌측 네비게이션
    ├── SettingsToggle.tsx     - 토글 공통 컴포넌트
    └── index.ts               - 서브컴포넌트 배럴
```

### 1.4 Settings Sections (모듈러 섹션)

```
📁 Settings Sections (src/components/settings/sections/)
├── ProfileSection.tsx         - 프로필/아바타 관리
├── NotificationSection.tsx    - 알림/푸시 설정
├── PrivacySection.tsx         - 개인정보/공개 범위
├── DataSection.tsx            - 데이터(백업/내보내기/삭제)
└── index.ts                   - 섹션 배럴
```

### 1.5 Points Modals (도메인 컨테이너)

```
📁 Points (src/components/points/)
├── PointsExplanationModal.tsx - 포인트 규칙 안내 모달
├── PointSettingsModal.tsx     - 포인트 설정 모달
├── PointAnalysisModal.tsx     - 포인트 분석/해석 모달
├── TaskDetailModal.tsx        - 태스크 상세 모달(포인트 맥락)
└── index.ts                   - 배럴
```

## 2. 태스크 (Task) 계층

```
📁 Task (src/components/task/)
├── TaskCard.tsx               - 태스크 카드(리스트/상세 요약)
├── TaskDetail.tsx             - 태스크 상세 카드(컴포넌트 레벨)
├── QuickAddTask.tsx           - 빠른 태스크 추가(자연어/제안)
├── TaskCommentSection.tsx     - 댓글/스레드
├── FileAttachment.tsx         - 파일 첨부/업로드
├── MentionInput.tsx           - 멘션/오토컴플리트 입력
└── index.ts                   - 배럴
```

## 3. 가족 (Family) 계층

```
📁 Family (src/components/family/)
├── GroupChat.tsx              - 그룹 채팅/실시간 협업
├── ManualInviteModal.tsx      - 초대코드 수동 입력 모달
├── QRInviteModal.tsx          - 초대 QR 표시 모달
├── QRScannerModal.tsx         - 초대 QR 스캔 모달
└── index.ts                   - 배럴
```

## 4. 라우팅 (Routing) 계층

```
📁 Routing (src/components/routing/)
├── ProtectedRoute.tsx         - 인증 보호 라우트
├── NotFound.tsx               - 404 페이지
└── routeConstants.ts          - 라우트 상수
```

## 5. 공통 (Common) 계층

```
📁 Common (src/components/common/)
├── LoadingSpinner.tsx         - 로딩 스피너
├── ErrorBoundary.tsx          - 오류 경계
└── withErrorBoundary.tsx      - HOC 오류 경계 래퍼
```

## 6. 캘린더 (Calendar) 계층

```
📁 Calendar (src/components/calendar/)
├── Calendar.tsx               - 도메인 캘린더 컴포넌트
└── index.ts                   - 배럴
```

## 7. 통계 (Statistics) 계층

```
📁 Statistics (src/components/statistics/)
└── StatisticsInsights.tsx     - 통찰/인사이트 위젯
```

## 8. UI (Design System 기반) 계층

### 8.1 Base UI Components

```
📁 UI (src/components/ui/)
├── GlassCard.tsx              - 카드 베이스(유리효과)
├── button.tsx                 - 버튼 베이스
├── button-variants.ts         - 버튼 변형/스타일 토큰
├── WaveButton.tsx             - 웨이브 효과 버튼
├── badge.tsx                  - 배지 베이스
├── badge-variants.ts          - 배지 변형/스타일 토큰
├── input.tsx                  - 입력 필드
├── textarea.tsx               - 텍스트 영역
├── dropdown-menu.tsx          - 드롭다운 메뉴
├── popover.tsx                - 팝오버
├── calendar.tsx               - 캘린더(UI 베이스)
├── tabs.tsx                   - 탭
├── scroll-area.tsx            - 스크롤 영역
├── separator.tsx              - 구분선
├── progress.tsx               - 진행률 바
├── avatar.tsx                 - 아바타
├── avatar-utils.tsx           - 아바타 유틸리티
├── utils.ts                   - 공통 스타일 유틸리티
└── index.ts                   - 배럴
```

### 8.2 Responsive UI

```
📁 UI/Responsive (src/components/ui/responsive/)
├── ResponsiveContainer.tsx    - 반응형 컨테이너
├── ResponsiveButton.tsx       - 반응형 버튼
└── index.ts                   - 배럴
```

### 8.3 Typography

```
📁 UI/Typography (src/components/ui/)
├── typography.tsx             - 타이포그래피 프리셋 컴포넌트
├── typography-constants.ts    - 타이포 상수
├── typography-utils.ts        - 타이포 유틸리티 함수
├── typography-utils.tsx       - 타이포 관련 리액트 유틸
└── typography/index.ts        - 배럴
```

## 9. 디자인 시스템 계층

### 9.1 Design Tokens & System Utils

```
📁 Design System (src/lib/)
├── design-tokens.ts           - 디자인 토큰(색상/타이포/스페이싱/섀도우 등)
├── responsive.ts              - 반응형 헬퍼/브레이크포인트
├── utils.ts                   - 공통 유틸리티
├── i18n.ts                    - 국제화 설정
└── index.ts                   - 배럴
```

## 10. 입력/폼 UI 모듈 정리

```
📁 Form UI (src/components/ui/)
├── input.tsx                  - 입력
├── textarea.tsx               - 텍스트 영역
├── dropdown-menu.tsx          - 드롭다운
├── popover.tsx                - 팝오버
├── tabs.tsx                   - 탭
└── scroll-area.tsx            - 스크롤 영역
```

## 11. 정합성 가이드 (사용 우선순위)

1. Design Tokens(토큰) → 2. Base UI → 3. 도메인 컴포넌트(Task/Family/Settings 등) → 4. 페이지 컨테이너
2. 공통 스타일/레이아웃은 `ui/*`, `layout/*`에서 우선 사용
3. 페이지 단에서 별도 스타일이 필요한 경우 최소화하여 적용

## 12. 배럴(인덱스) 파일 목록

```
src/components/calendar/index.ts
src/components/family/index.ts
src/components/pages/* (별도 배럴 없음)
src/components/points/index.ts
src/components/settings/index.ts
src/components/settings/components/index.ts
src/components/settings/sections/index.ts
src/components/task/index.ts
src/components/ui/index.ts
src/components/ui/responsive/index.ts
src/components/ui/typography/index.ts
src/pages/index.ts
```

## 13. 파일 구조 요약

```
src/components/
├── calendar/          - 도메인 캘린더
├── common/            - 공통 유틸리티 컴포넌트
├── family/            - 가족 도메인(채팅/초대/QR)
├── layout/            - 글로벌 레이아웃(헤더/푸터/배경)
├── pages/             - 정적 정보 페이지(About/Terms 등)
├── points/            - 포인트 관련 모달/설정
├── routing/           - 라우팅 유틸/가드/404
├── settings/          - 설정 컨테이너/섹션/서브컴포넌트
├── statistics/        - 통계 인사이트 위젯
├── task/              - 태스크 카드/입력/댓글/첨부
└── ui/                - Design System 기반 UI 컴포넌트

src/pages/
├── TodoHome.tsx       - 홈 대시보드
├── TaskCreate.tsx     - 할일 생성
├── TaskDetailPage.tsx - 할일 상세(페이지)
├── FamilyManage.tsx   - 가족 관리
├── Settings.tsx       - 설정(페이지)
├── SettingsPage.tsx   - 설정(레거시)
├── Statistics.tsx     - 통계
├── StatisticsEnhanced.tsx - 통계 확장
├── Notifications.tsx  - 알림
├── PointsManagement.tsx - 포인트 관리
├── Login.tsx          - 로그인
└── index.ts           - 배럴
```

이 계층구조는 현행 코드의 실체와 정확히 일치하며, Plan_v2.0에 구조적으로 동일하게 이식하는 데 필요한 참조 역할을 합니다.
